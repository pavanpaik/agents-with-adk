[
  {
    "query": "Review this for PEP 8 compliance:\n```python\nclass user_manager:\n    def GetUser(self, UserID):\n        MAX_users = 100\n        return None\n\n    def create_user(self,username,email):\n        result=username+email\n        return result\n```",
    "expected_tool_use": [],
    "reference": {
      "must_detect": [
        {
          "type": "QUALITY",
          "severity": "MEDIUM",
          "pep": "PEP 8",
          "issue": "Class name should be PascalCase"
        },
        {
          "type": "QUALITY",
          "severity": "MEDIUM",
          "pep": "PEP 8",
          "issue": "Method names should be snake_case"
        },
        {
          "type": "QUALITY",
          "severity": "LOW",
          "pep": "PEP 8",
          "issue": "Missing spaces around operators"
        }
      ],
      "min_findings": 3
    }
  },
  {
    "query": "Review this non-Pythonic code:\n```python\ndef process_items(items):\n    result = []\n    for i in range(len(items)):\n        if items[i] % 2 == 0:\n            result.append(items[i] * 2)\n    return result\n\ndef get_names(users):\n    names = []\n    for user in users:\n        names.append(user.name)\n    return names\n```",
    "expected_tool_use": [],
    "reference": {
      "must_detect": [
        {
          "type": "QUALITY",
          "severity": "LOW",
          "category": "Pythonic",
          "issue": "Should use list comprehension"
        },
        {
          "type": "QUALITY",
          "severity": "LOW",
          "category": "Pythonic",
          "issue": "Should use enumerate or direct iteration"
        }
      ],
      "must_suggest": ["list comprehension", "enumerate"]
    }
  },
  {
    "query": "Review this for missing type hints:\n```python\ndef calculate_total(items):\n    total = 0\n    for item in items:\n        total += item.price\n    return total\n\ndef get_user(user_id):\n    user = User.query.get(user_id)\n    if user:\n        return user\n    return None\n```",
    "expected_tool_use": [],
    "reference": {
      "must_detect": [
        {
          "type": "QUALITY",
          "severity": "MEDIUM",
          "pep": "PEP 484",
          "issue": "Missing type hints"
        }
      ],
      "must_provide_fix": true,
      "fix_should_include": ["-> float", "-> Optional[User]", "List[Item]"]
    }
  },
  {
    "query": "Review this for missing docstrings:\n```python\nclass User:\n    def __init__(self, name, email):\n        self.name = name\n        self.email = email\n\n    def validate(self):\n        if not self.email:\n            return False\n        return True\n```",
    "expected_tool_use": [],
    "reference": {
      "must_detect": [
        {
          "type": "QUALITY",
          "severity": "MEDIUM",
          "pep": "PEP 257",
          "issue": "Missing docstrings"
        }
      ],
      "must_suggest": ["docstring", "documentation"]
    }
  },
  {
    "query": "Review this code smell - Long Method:\n```python\ndef process_order(order):\n    # 50 lines of validation\n    if not order.user:\n        raise ValueError(\"No user\")\n    if not order.items:\n        raise ValueError(\"No items\")\n    # ... 20 more validation lines\n\n    # 30 lines of price calculation\n    total = 0\n    for item in order.items:\n        total += item.price * item.quantity\n    # ... 25 more calculation lines\n\n    # 30 lines of payment processing\n    # ... payment logic\n\n    # 20 lines of email sending\n    # ... email logic\n```",
    "expected_tool_use": [],
    "reference": {
      "must_detect": [
        {
          "type": "QUALITY",
          "severity": "MEDIUM",
          "code_smell": "Long Method",
          "issue": "Method is too long and does too much"
        }
      ],
      "must_suggest": ["extract method", "separate concerns"]
    }
  },
  {
    "query": "Review this code smell - Magic Numbers:\n```python\ndef calculate_discount(total):\n    if total > 100:\n        discount = total * 0.15\n    elif total > 50:\n        discount = total * 0.10\n    else:\n        discount = total * 0.05\n    return discount\n```",
    "expected_tool_use": [],
    "reference": {
      "must_detect": [
        {
          "type": "QUALITY",
          "severity": "LOW",
          "code_smell": "Magic Numbers",
          "issue": "Unexplained numeric literals"
        }
      ],
      "must_suggest": ["named constants", "UPPER_CASE constants"]
    }
  },
  {
    "query": "Review this code smell - Duplicated Code:\n```python\ndef get_user_email(user_id):\n    user = User.query.get(user_id)\n    if user:\n        return user.email\n    return None\n\ndef get_user_name(user_id):\n    user = User.query.get(user_id)\n    if user:\n        return user.name\n    return None\n```",
    "expected_tool_use": [],
    "reference": {
      "must_detect": [
        {
          "type": "QUALITY",
          "severity": "MEDIUM",
          "code_smell": "Duplicated Code",
          "issue": "Repeated logic"
        }
      ],
      "must_suggest": ["extract common logic", "DRY principle"]
    }
  },
  {
    "query": "Review this well-written Pythonic code (should have minimal findings):\n```python\nfrom typing import List, Optional\nfrom dataclasses import dataclass\n\n@dataclass\nclass User:\n    \"\"\"Represents a user in the system.\"\"\"\n    name: str\n    email: str\n    age: int\n\n    def is_adult(self) -> bool:\n        \"\"\"Check if user is an adult.\"\"\"\n        return self.age >= 18\n\ndef process_users(users: List[User]) -> List[str]:\n    \"\"\"Extract names of adult users.\"\"\"\n    return [user.name for user in users if user.is_adult()]\n```",
    "expected_tool_use": [],
    "reference": {
      "must_detect": [],
      "should_not_flag": ["good code", "PEP compliant", "Pythonic"],
      "max_findings": 0
    }
  }
]
